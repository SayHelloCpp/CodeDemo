# CodeDemo

//写一个读取串口usb采集数据并以topic话题的形式发布出来的驱动

Demo学习笔记

首先：是解决ROS串口通讯协议：

形如：AA BB CC 00 00 XX XX XX XX XX XX XX XX XX XX XX 9D
    
通信协议有帧头，帧尾，校验位等;以帧头开始，帧尾结束，其中有效数据和是否定长得看协议规定；

思路：1.解决串口读取数据的问题（可以使其以十六进制显示输出，以此对比读取的数据是否有异常）
              2.寻找到需要的数据，可以使其读到字节数大于零就让其进入循环，
              3.寻找帧头（或下发指令）若找到则进行数据处理，解析
                  （1）处理数据，准确提取到有效数据（一般在帧头后，校验位前）在这里主要是提取到定长的数据，将帧头后到校验位之间的数据区之和取低八位再按位取反，得到的值与校验位做比较，若正确则进去数据解析;
                  （2）数据解析，按协议内容将有效数据进行一一处理，在这里是将其距离值和置信度转化为十进制数值，再将其值分配给给定的消息类型话题中去;
                  
                  
用到的内容：
C++：
deque（）函数;  双端数列,可以快速的添加删除修改
substr ( )函数；substr(size_type _Off = 0,size_type _Count = npos) 主要功能是复制子字符串，要求从指定位置开始，并具有指定的长度。如果没有指定长度_Count或_Count+_Off超出了源字符串的长度，则子字符串将延续到源字符串的结尾。将字符连接:第一个参数为下标[i],第二个参数表示把本身连接到第一个参数内容的后面
length（）函数;  返回数据的字符数大小
insert（）函数;     (i,str) /在下标为i的位置，插入字符串str
find_first_not_of()函数; 正向查找在原字符串中第一个与指定字符串（或字符）中的任一字符都不匹配的字符，返回它的位置。若查找失败，则返回npos。（npos定义为保证大于任何有效下标的值。）

1.将类的声明和定义分别写在.h和.cpp文件中，其中node为功能实现文件，可当作main主函数，尽量精简且调用类（类的对象实例化）
&好好复习Cpp基础知识，近期学习路线：观看并实际操作Cpp黑马学习视频-> 阅读Cpp primer -> 接着看Effective c++ ,MoreEffectiveC++,深度探索C++对象模型 -> 观看侯捷STL前四章视频 -> 阅读 STL源码剖析
2.ROS相关的环境编译,如明白其基本流程,按照模板编写代码,清楚topic,srv,param三种最基本最核心的通信机制(牵涉到计算机网络部分的学习,在此需要在学习C++和ROS的基础上学习计算机网络和操作系统,其次是算法和数据结构)
&抓紧学习ROS 链接地址:    http://www.autolabor.com.cn/book/ROSTutorials/

#suzi nanjing 22/09/2022
